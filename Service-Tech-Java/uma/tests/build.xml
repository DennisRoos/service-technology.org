<project name="uma.test" default="check">
	
	<!-- retrieve basedir of this check script -->
	<dirname property="test.basedir" file="${ant.file.uma.test}" />
	
	<property name="home" location=".." />
	<property name="bin" location="${home}/bin" />
	
	<property name="dir.test-src" location="${test.basedir}/src-test" />
	<property name="dir.test-bin" location="${test.basedir}/bin-test" />
	
	<property name="testfiles" location="${test.basedir}/testfiles" />
	
	<property name="compiled.classes" location="${bin}" />
	<property name="test.libs-external" location="${home}/libs-external/" />
	
	<path id="run.classpath">
		<pathelement location="${compiled.classes}"/>
      	<fileset dir="${test.libs-external}">
        	<include name="**/*.jar"/>
      	</fileset>
		<pathelement location="${dir.test-bin}"/>
	</path>
	
	<target name="build-test">
		<mkdir dir="${dir.test-bin}" />
		<javac classpathref="run.classpath"
			srcdir="${dir.test-src}"
         	destdir="${dir.test-bin}"
         	debug="on" />
	</target>
	
	<target name="check" depends="build-test">
		<echo message="Running tests in ${test.basedir}" />
		<java classname="hub.top.scenario.OcletTest">
			<classpath refid="run.classpath" />
		</java>
		<java classname="hub.top.uma.UmaTest">
			<classpath refid="run.classpath" />
		</java>
		
		<antcall target="clean" />
	</target>
	
	<target name="clean">
		<delete dir="${dir.test-bin}" includeemptydirs="true" failonerror="false"/>
	</target>
	
</project>