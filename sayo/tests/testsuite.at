AT_INIT

# define macros to skip a test if Fiona or Petri was not found by configure
m4_define(AT_CHECK_FIONA, [AT_CHECK([if test "FIONA" == "not found"; then exit 77; fi])])
m4_define(AT_CHECK_PETRI, [AT_CHECK([if test "PETRI" == "not found"; then exit 77; fi])])

############################################################################
AT_BANNER([Standard Options])
############################################################################

AT_SETUP([Help output])
AT_CHECK([SAYO --help],0,ignore)
AT_CLEANUP

AT_SETUP([Version output])
AT_CHECK([SAYO --version],0,ignore)
AT_CLEANUP

############################################################################
AT_BANNER([I/O Tests])
############################################################################

AT_SETUP([File In, File Out])
AT_CHECK([cp TESTFILES/zeus.og .])
AT_CHECK([SAYO --input=zeus.og --output=zeus.sa],0)
AT_CHECK([test -f zeus.sa])
AT_CLEANUP

AT_SETUP([File In, Pipe Out])
AT_CHECK([cp TESTFILES/zeus.og .])
AT_CHECK([SAYO --input=zeus.og > zeus.sa],0)
AT_CHECK([test -f zeus.sa])
AT_CLEANUP

AT_SETUP([Pipe In, File Out])
AT_CHECK([cp TESTFILES/zeus.og .])
AT_CHECK([cat zeus.og | SAYO --output=zeus.sa],0)
AT_CHECK([test -f zeus.sa])
AT_CLEANUP

AT_SETUP([Pipe In, Pipe Out])
AT_CHECK([cp TESTFILES/zeus.og .])
AT_CHECK([cat zeus.og | SAYO > zeus.sa],0)
AT_CHECK([test -f zeus.sa])
AT_CLEANUP

