PLACE
INTERNAL p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13;
INPUT registration, quest_in;
OUTPUT quest_out, result, archive;

INITIALMARKING p1: 1;
FINALMARKING p13: 1;

TRANSITION a1
CONSUME p1, registration;
PRODUCE p2, p3;

TRANSITION a2
CONSUME p2;
PRODUCE p4, quest_out;

TRANSITION a3
CONSUME p4, quest_in;
PRODUCE p5;

TRANSITION a4
CONSUME p5;
PRODUCE p6;

TRANSITION a5
CONSUME p3;
PRODUCE p7;

TRANSITION a6
CONSUME p7;
PRODUCE p8;

TRANSITION a7
CONSUME p8;
PRODUCE p9;

TRANSITION NOK
CONSUME p9;
PRODUCE p3;

TRANSITION OK
CONSUME p9;
PRODUCE p10;

TRANSITION DONE
CONSUME p8;
PRODUCE p10;

TRANSITION a8
CONSUME p10;
PRODUCE p11, result;

TRANSITION JOIN
CONSUME p11, p6;
PRODUCE p12;

TRANSITION a9
CONSUME p12;
PRODUCE p13, archive;
